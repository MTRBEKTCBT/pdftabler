---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# pdftabler

<!-- badges: start -->
<!-- badges: end -->

The goal of pdftabler is to 
create arranged data frame extracted from PDF file by R.
It deals especially with time-series data.
This package is required pdftools.

## Installation

You can install the development version of pdftabler from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("MTRBEKTCBT/pdftabler")
```

## Example

The data extracted from a package `pdftools::pdf_text` is 
often dirty by unnecessary spaces 
and is a vector rather than a dataframe.
This is a basic example which shows you how to 
get the data obtained from pdf to a complete dataframe.

Suppose we already have vector data extracted by `pdftools::pdf_text` that has just been extracted.
We'll use `conbini` data which records JFA sales from 2005 to 2021
to show how each function works.

First of all, the data has to be split into each cell of table
which originally displayed in PDF.
To process this task, use `vpr_cell()` and `vpr_split()`.

```{r}
conbini |>
  vpr_cell() |>
  purrr::flatten_chr() |>
  vpr_split(initial = 29, n_col = 15, dur_month = 2)
```

You will notice about those arguments in `vpr_split()`,
`initial` denotes a initial cell for records.
Note that it indicates a record for inner data.
Do not specify a raw of column names.

We will also wonder which number is to be `initial`?
We can use `vpr_index` to resolve this task.
It creates index dataframe that indicates 
which place is any word or symbol in the vector.

```{r}
key <- sprintf("%dæœˆ", 1:12)

idx <- 
conbini |>
  vpr_cell() |>
  purrr::flatten_chr() |>
  vpr_index(keywords = key)

idx
```

Now we can use another function `vpr_rsplit` that can handle dataframe as argument.
It is a version of recursive function of `vpr_split`.


```{r}
conbini |>
  vpr_cell() |>
  purrr::flatten_chr() |>
  vpr_rsplit(initial = idx[1, ], n_col = nrow(idx))
```

```{r example}
# library(pdftabler)
## basic example code
```

What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r cars}
summary(cars)
```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/v1/examples>.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub and CRAN.
